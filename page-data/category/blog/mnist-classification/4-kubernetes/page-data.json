{"componentChunkName":"component---src-templates-post-tsx","path":"/category/blog/mnist-classification/4-kubernetes/","result":{"data":{"site":{"siteMetadata":{"title":"ì–´ì„œOpShow","author":"ì¥ìˆ˜ì™„","siteUrl":"https://ssuwani.github.io"}},"markdownRemark":{"id":"739edd86-d36b-5986-94b6-a4d8e92b99ab","excerpt":"Kubernetes ìœ„ì— ì˜¬ë ¤ë³´ì ì‹¤í—˜ ë‚ ì§œ: 2021ë…„ 10ì›” 12ì¼\nì‹¤í—˜ì: Suwan Jang ì•ì„œ ë„ì»¤ë¡œ MNIST ë¶„ë¥˜ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•œ ê° Taskâ€¦","html":"<h1 id=\"kubernetes-ìœ„ì—-ì˜¬ë ¤ë³´ì\" style=\"position:relative;\"><a href=\"#kubernetes-%EC%9C%84%EC%97%90-%EC%98%AC%EB%A0%A4%EB%B3%B4%EC%9E%90\" aria-label=\"kubernetes ìœ„ì— ì˜¬ë ¤ë³´ì permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kubernetes ìœ„ì— ì˜¬ë ¤ë³´ì</h1>\n<p>ì‹¤í—˜ ë‚ ì§œ: 2021ë…„ 10ì›” 12ì¼\nì‹¤í—˜ì: Suwan Jang</p>\n<p>ì•ì„œ ë„ì»¤ë¡œ MNIST ë¶„ë¥˜ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•œ ê° Taskë¥¼ ì´ë¯¸ì§€ë¡œ ë§Œë“¤ì—ˆë‹¤. ë˜í•œ ì»¨í…Œì´ë„ˆê°„ ë°ì´í„° ì €ì¥ì„ ìœ„í•´ ë„ì»¤ ë³¼ë¥¨ë„ í•˜ë‚˜ ë§Œë“¤ì—ˆë‹¤.</p>\n<p>ì´ì œ ì´ë¥¼ ì¿ ë²„ë„¤í‹°ìŠ¤ ìœ„ì—ì„œ ì˜¬ë ¤ì„œ ì¡°ê¸ˆ ë” ìœ ì—°í•˜ê²Œ ê´€ë¦¬í•´ë³´ì.</p>\n<h3 id=\"-stack\" style=\"position:relative;\"><a href=\"#-stack\" aria-label=\" stack permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ“š Stack</h3>\n<ul>\n<li>Kubernetes</li>\n<li>Network</li>\n</ul>\n<p>âœ… <strong>TODO</strong></p>\n<ul>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled>  PV &#x26; PVC</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled>  MNIST Train &#x26; Save Model in PVC</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled>  MNIST Serving</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled>  Run React App</li>\n</ul>\n<h4 id=\"âœ“-pv--pvc\" style=\"position:relative;\"><a href=\"#%E2%9C%93-pv--pvc\" aria-label=\"âœ“ pv  pvc permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>âœ“ PV &#x26; PVC</strong></h4>\n<p>hostPath PVë¥¼ ìƒì„±í•œë‹¤. ì´ëŠ” ë‹¨ì¼ë…¸ë“œì—ì„œë§Œ ì§€ì›ëœë‹¤. </p>\n<p>minikube sshë¥¼ í†µí•´ í´ëŸ¬ìŠ¤í„° ë…¸ë“œì˜ ì…¸ì— ì ‘ì†í•´ ì—°ê²°ì„ ìœ„í•œ ë””ë ‰í† ë¦¬ë¥¼ í•˜ë‚˜ ìƒì„±í•˜ì</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">minikube <span class=\"token function\">ssh</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">mkdir</span> /mnt/mnist <span class=\"token comment\"># ì‚¬ì‹¤ ê¼­ ì•ˆí•´ë„ ìë™ìœ¼ë¡œ ìƒì„±ëœë‹¤.</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<details>\n<summary>pv-volume.yaml</summary>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\">    <span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n    <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> PersistentVolume\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>pv<span class=\"token punctuation\">-</span>volume\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> local\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">storageClassName</span><span class=\"token punctuation\">:</span> mnist\n      <span class=\"token key atrule\">capacity</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">storage</span><span class=\"token punctuation\">:</span> 3Gi\n      <span class=\"token key atrule\">accessModes</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> ReadWriteOnce\n      <span class=\"token key atrule\">hostPath</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/mnt/mnist\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</details>\n<details>    \n<summary>pv-claim.yaml</summary>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> PersistentVolumeClaim\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>pv<span class=\"token punctuation\">-</span>claim\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">storageClassName</span><span class=\"token punctuation\">:</span> mnist\n  <span class=\"token key atrule\">accessModes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> ReadWriteOnce\n  <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">storage</span><span class=\"token punctuation\">:</span> 3Gi</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</details>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">kubectl apply -f pv-volume.yaml\nkubectl apply -f pv-claim.yaml</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>ìœ„ë¥¼ ê°ê° ì‹¤í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ PVì—ì„œ PVCê°€ ì ìš©ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆê³  PVCì—ì„œë„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token operator\">></span> kubectl get <span class=\"token function\">pv</span>\nNAME                                       CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS      CLAIM                          STORAGECLASS   REASON   AGE\nmnist-pv-volume                            3Gi        RWO            Retain           Bound       default/mnist-pv-claim         mnist                   9m11s\n\n<span class=\"token operator\">></span> kubectl get pvc\nNAME             STATUS   VOLUME            CAPACITY   ACCESS MODES   STORAGECLASS   AGE\nmnist-pv-claim   Bound    mnist-pv-volume   3Gi        RWO            mnist          8m25s</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id=\"âœ“-mnist-train--save-model-in-pvc\" style=\"position:relative;\"><a href=\"#%E2%9C%93-mnist-train--save-model-in-pvc\" aria-label=\"âœ“ mnist train  save model in pvc permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>âœ“ MNIST Train &#x26; Save Model in PVC</strong></h4>\n<p>ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ë°°í¬ë¥¼ ìœ„í•œ ê°€ì¥ ì‘ì€ ë‹¨ìœ„ì¸ PodëŠ” ì—¬ëŸ¬ê°œì˜ ì›Œì»¤ë¡œë“œ ì¦‰, ì• í”Œë¦¬ì¼€ì´ì…˜ ìœ„ì—ì„œ ë™ì‘í•œë‹¤. Taskì— ë”°ë¼ ì ì ˆí•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„ íƒí•´ì•¼í•œë‹¤.</p>\n<p>í•˜ë‚˜ì˜ Podë¥¼ ìƒì„±í•˜ê³  ì•ˆì •ì ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ”ê²Œ ì´ˆì ì„ ë§ì¶˜ Jobì´ MNIST ëª¨ë¸ í•™ìŠµì„ ìœ„í•´ ì ì ˆí•˜ë‹¤ê³  íŒë‹¨í•˜ì˜€ë‹¤.</p>\n<details>\n<summary>mnist-train-job.yaml</summary>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> batch/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Job\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>train<span class=\"token punctuation\">-</span>job\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>storage\n          <span class=\"token key atrule\">persistentVolumeClaim</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">claimName</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>pv<span class=\"token punctuation\">-</span>claim\n\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>train<span class=\"token punctuation\">-</span>container\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> ssuwani/mnist_train\n          <span class=\"token key atrule\">args</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"--epochs\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"--save-model\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"--save-model-path\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"/app/mnist.pt\"</span><span class=\"token punctuation\">]</span>\n          <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/app\"</span>\n              <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>storage\n      <span class=\"token key atrule\">restartPolicy</span><span class=\"token punctuation\">:</span> Never\n  <span class=\"token key atrule\">backoffLimit</span><span class=\"token punctuation\">:</span> <span class=\"token number\">4</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</details>\n    \n    \n<p><code class=\"language-text\">.spec.volumes</code>ë¥¼ ë³´ë©´ ì´ì „ì— ë§Œë“  <code class=\"language-text\">mnist-pv-claim</code> ë¥¼ ì‚¬ìš©í•˜ëŠ” <code class=\"language-text\">mnist-storage</code>ë¥¼ ìƒì„±í•œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë˜í•œ <code class=\"language-text\">ssuwani/mnist_train</code> ë¥¼ ì‹¤í–‰í•˜ëŠ” ì»¨í…Œì´ë„ˆê°€ <code class=\"language-text\">mnist-storage</code>ë¥¼ <code class=\"language-text\">/app</code> ìœ„ì¹˜ë¡œ ë§ˆìš´íŠ¸í–ˆë‹¤.</p>\n<p><strong>Job ì‹¤í–‰</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">kubectl apply -f mnist-train-job.yaml</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong>ê²°ê³¼í™•ì¸</strong></p>\n<p>Jobê³¼ Podë¥¼ í™•ì¸í•˜ê³  ì‹¤í–‰ëœ Podì˜ Logë¥¼ í™•ì¸í•´ë³´ë©´ ë™ì‘ì´ ì˜ ë˜ì—ˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token operator\">></span> kubectl get job\nNAME              COMPLETIONS   DURATION   AGE\nmnist-train-job   <span class=\"token number\">1</span>/1           27s        7m11s\n\n<span class=\"token operator\">></span> kubectl get pods\nNAME                    READY   STATUS      RESTARTS   AGE\nmnist-train-job-twdvv   <span class=\"token number\">0</span>/1     Completed   <span class=\"token number\">0</span>          7m14s\n\n<span class=\"token operator\">></span> kubectl logs mnist-train-job-twdvv\n<span class=\"token number\">100.0</span>% <span class=\"token comment\"># MNIST ë°ì´í„°ë¥¼ ë‹¤ìš´ë°›ëŠ” ê³¼ì •ì´ë‹¤.</span>\n<span class=\"token number\">102.8</span>%\n<span class=\"token number\">100.0</span>%\n<span class=\"token number\">112.7</span>%\n--- ì´í•˜ ìƒëµ</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>ë˜í•œ í•™ìŠµì´ ì¢…ë£Œë˜ë©´ì„œ PVCë¡œ ì—°ê²°ëœ ìœ„ì¹˜ì— ëª¨ë¸ì„ ì €ì¥í•˜ì˜€ë‹¤. ë…¸ë“œ ì…¸ì— ì ‘ì†í•˜ì—¬ ì—°ê²° í•´ ë‘” <code class=\"language-text\">/mnt/mnist</code> í´ë”ì— ì˜ ì €ì¥ì´ ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë³´ì.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token operator\">></span> minikube <span class=\"token function\">ssh</span>\nLast login: Tue Oct <span class=\"token number\">12</span> 08:38:50 <span class=\"token number\">2021</span> from <span class=\"token number\">192.168</span>.49.1\ndocker@minikube:~$ <span class=\"token function\">ls</span> /mnt/mnist/\n\nmnist.pt <span class=\"token comment\"># >&lt;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id=\"âœ“-mnist-serving-deployment--service\" style=\"position:relative;\"><a href=\"#%E2%9C%93-mnist-serving-deployment--service\" aria-label=\"âœ“ mnist serving deployment  service permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>âœ“ MNIST Serving (Deployment + Service)</strong></h4>\n<p>Flask ë¥¼ ì‹¤í–‰í•˜ëŠ” ì´ë¯¸ì§€ë¥¼ ì¿ ë²„ë„¤í‹°ìŠ¤ ë””í”Œë¡œì´ë¨¼íŠ¸ë¥¼ ë§Œë“¤ê³  ì„œë¹„ìŠ¤ë¡œ ë§Œë“¤ì–´ë³´ì</p>\n<details>\n<summary>mnist-serving.yaml</summary>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>serving<span class=\"token punctuation\">-</span>deployment\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>serving\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>serving\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>serving\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>serving\n        <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> ssuwani/mnist_app\n        <span class=\"token key atrule\">args</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"--model_path\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"/app/mnist.pt\"</span><span class=\"token punctuation\">]</span>\n        <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5000</span>\n        <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/app\"</span>\n            <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>storage\n      <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>storage\n          <span class=\"token key atrule\">persistentVolumeClaim</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">claimName</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>pv<span class=\"token punctuation\">-</span>claim</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</details>\n    \n    \n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">k apply -f mnist-serving.yaml</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>DeploymentëŠ” <code class=\"language-text\">.spec.replicas</code> ì¦‰ ë ˆí”Œë¦¬ì¹´ì…‹ì„ ê¸°ë³¸ì ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. íŒŒì¼ì˜ ë‚´ìš©ê³¼ ê°™ì´ <code class=\"language-text\">replicas: 3</code> ë¡œ ì„¤ì •í•˜ë©´ Podë¥¼ 3ê°œ ë§Œë“ ë‹¤ëŠ” ì´ì•¼ê¸°ë‹¤. ì´ì— ë”°ë¥¸ ê°•ì ì„ ì˜ìƒìœ¼ë¡œ ì ê¹ ì°ì–´ë´¤ë‹¤.</p>\n<video width=\"480\" controls>\n  <source src=\"/750b0ed89b0fc0ffa6c45cba2a7e4dae/replicas-test.mov\" type=\"video/mp4\">\n</video>\n<p>Train ë•Œì™€ ë§ˆì°¬ê°€ì§€ë¡œ ë§Œë“¤ì–´ì§„ Podì˜ Logsë¥¼ í™•ì¸í•´ë³´ì</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token operator\">></span> kubectl get pods\nNAME                                        READY   STATUS      RESTARTS   AGE\nmnist-serving-deployment-5994976558-78cm6   <span class=\"token number\">1</span>/1     Running     <span class=\"token number\">0</span>          4m32s\n--- ìƒëµ ---\n\n<span class=\"token operator\">></span> k logs mnist-serving-deployment-5994976558-78cm6\n--- ìƒëµ ---\n * Running on http://172.17.0.73:5000/ <span class=\"token punctuation\">(</span>Press CTRL+C to quit<span class=\"token punctuation\">)</span> <span class=\"token comment\"># ì˜ ì‹¤í–‰ëœ ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</span>\n--- ìƒëµ ---</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>ìœ„ì˜ logsì—ì„œ  <code class=\"language-text\">* Running on [http://172.17.0.73:5000/](http://172.17.0.73:5000/)</code> ê°€ ë³´ì¸ë‹¤. ì´ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ë‚´ë¶€ì£¼ì†Œì´ë‹¤. í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì—ì„  ì ‘ì†ì´ ê°€ëŠ¥í•˜ì§€ë§Œ ë¡œì»¬ í˜¹ì€ ì›ê²©ì—ì„  ì ‘ì†í•˜ê¸° ì–´ë µë‹¤. ì´ê²Œ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ëŠ” ê°€ì¥ í° ì´ìœ ë¼ê³  ìƒê°í•œë‹¤. </p>\n<p>í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì—ì„œ ì ‘ì†ì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê±¸ ì¦ëª…í•´ë³´ì. ê°„ë‹¨í•˜ë‹¤ minikube ssh ë¡œ ë…¸ë“œ ì…¸ì— ì ‘ì†í•´ì„œ ì—°ê²°ì„ í™•ì¸í•´ë³´ì</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token operator\">></span> minikube <span class=\"token function\">ssh</span>\nLast login: Tue Oct <span class=\"token number\">12</span> 09:31:23 <span class=\"token number\">2021</span> from <span class=\"token number\">192.168</span>.49.1\n\ndocker@minikube:~$ <span class=\"token function\">curl</span> http://172.17.0.73:5000/\n<span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"error\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"use POST /prediction instead of root route\"</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>ì¶œë ¥ì€ ì—ëŸ¬ë¼ê³  ë‚˜ì™€ì„œ í˜¼ë€ì´ ìˆì„ ìˆ˜ ìˆì§€ë§Œ ë‚´ê°€ ì„¤ì •í•´ë†“ì€ ë¦¬í„´ê°’ì´ë‹¤. ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ì—ˆë‹¤.</p>\n<p><strong>ì„œë¹„ìŠ¤ ì—°ê²°í•˜ê¸°</strong></p>\n<details>\n<summary>mnist-serving-service.yaml</summary>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>service\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>serving\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1234</span>\n      <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5000</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> NodePort</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</details>\n<p>selectorë¡œ ì„œë¹„ìŠ¤ ëŒ€ìƒì„ ê²°ì •í•œë‹¤. ìœ„ì—ì„œ <code class=\"language-text\">mnist-serving.yaml</code> ì—ì„œ <code class=\"language-text\">.spec.template.metadata.labels</code> ë¡œ ìƒì„±ëœ Podì˜ Labelì˜ ì¼ì¹˜ë¥¼ ê³„ì†í•´ì„œ ì¶”ì í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token comment\"># mnist-serving.yaml</span>\n<span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>serving\n\n\n<span class=\"token comment\"># mnist-serving-service.yaml</span>\n<span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>serving</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>ì„œë¹„ìŠ¤ ì‹¤í–‰í•˜ê¸°</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">kubectl apply -f mnist-serving-service.yaml</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>ì„œë¹„ìŠ¤ê°€ ì˜ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë³´ì</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token operator\">></span> kubectl get services\nNAME            TYPE        CLUSTER-IP      EXTERNAL-IP   PORT<span class=\"token punctuation\">(</span>S<span class=\"token punctuation\">)</span>          AGE\nmnist-service   NodePort    <span class=\"token number\">10.103</span>.250.89   <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">></span>        <span class=\"token number\">1234</span>:31322/TCP   28m\n\n<span class=\"token operator\">></span> kubectl describe services/mnist-service\nName:                     mnist-service\nNamespace:                default\nLabels:                   <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">></span>\nAnnotations:              <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">></span>\nSelector:                 <span class=\"token assign-left variable\">app</span><span class=\"token operator\">=</span>mnist-serving\nType:                     NodePort\nIP Families:              <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">></span>\nIP:                       <span class=\"token number\">10.103</span>.250.89\nIPs:                      <span class=\"token number\">10.103</span>.250.89\nPort:                     <span class=\"token operator\">&lt;</span>unset<span class=\"token operator\">></span>  <span class=\"token number\">1234</span>/TCP\nTargetPort:               <span class=\"token number\">5000</span>/TCP\nNodePort:                 <span class=\"token operator\">&lt;</span>unset<span class=\"token operator\">></span>  <span class=\"token number\">31322</span>/TCP\nEndpoints:                <span class=\"token number\">172.17</span>.0.72:5000,172.17.0.73:5000,172.17.0.74:5000\nSession Affinity:         None\nExternal Traffic Policy:  Cluster\nEvents:                   <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>NodePortê°€ 31322ë¡œ ì¡í˜€ìˆê³  EndPointë¡œ 3ê°œì˜ Podê°€ ì˜ ì¡í˜€ìˆëŠ”ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì„œë¹„ìŠ¤ì˜ í¬íŠ¸ì™€ ë…¸ë“œí¬íŠ¸ì— ëŒ€í•œ ë‚´ìš©ì´ ì´í•´ë  ë“¯ ì¡°ê¸ˆ í—·ê°ˆë¦°ë‹¤.. ë” ê³µë¶€í•˜ì.</p>\n<p><code class=\"language-text\">{clusterIP}:{NodePort}</code> ì— ì ‘ê·¼í•˜ë©´ ë…¸ë“œí¬íŠ¸ì— ì—°ê²°ëœ Podì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. ì–´ë–¤ íŒŒë“œì— ì ‘ê·¼í• ì§€ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ê°€ ì•Œì•„ì„œ ì •í•´ì¤€ë‹¤.</p>\n<p>ì–´ë–»ê²Œ ì•Œì•„ì„œ ì •í•´ì£¼ëƒëŠ” ë„ˆë¬´ ê¹Šì€ ì´ì•¼ê¸°ì§€ë§Œ ì‹¤í—˜ì„ í†µí•´ ì‹¤ì œë¡œ ì ì ˆíˆ ì•Œì•„ì„œ ì •í•´ì£¼ëŠ”ì§€ í™•ì¸í•´ë³´ì•˜ë‹¤.</p>\n<p>ì˜ìƒì˜ ì™¼ìª½ì€ watch ëª…ë ¹ì–´ë¡œ 3ê°œì˜ Podì˜ Logë¥¼ í™•ì¸í•˜ê³  ìˆë‹¤. </p>\n<p>ì˜ìƒì˜ ì˜¤ë¥¸ìª½ì€ curl ëª…ë ¹ì–´ë¡œ 0.5ì´ˆë§ˆë‹¤ í•œë²ˆì”© NodePortë¥¼ í†µí•´ Podì— ìš”ì²­ì„ ë³´ëƒˆë‹¤.</p>\n<ul>\n<li>\n<p>ëª…ë ¹ì–´</p>\n<p>watch log</p>\n<p><code class=\"language-text\">watch -n1 &quot;kubectl logs mnist-serving-deployment-5994976558-8hhcx | tail -n $(($LINES - 2))&quot;</code></p>\n<p>curl + while</p>\n<p><code class=\"language-text\">while true; do sleep 0.5; curl 192.168.49.2:31322; done;</code></p>\n</li>\n</ul>\n<video width=\"480\" controls>\n  <source src=\"/a9250c7acbca08e1ce46289151c0492d/NodePort.mov\" type=\"video/mp4\">\n</video>\n<p>ë„ˆë¬´ ê¸¸ì–´ì§€ì§€ë§Œ í•˜ë‚˜ ë” í•˜ê³  ë„˜ì–´ê°€ì•¼í•œë‹¤.</p>\n<p>í´ëŸ¬ìŠ¤í„° IPë¡œ Serviceì— ì ‘ê·¼í•  ìˆ˜ ìˆì§€ë§Œ ì´ ë˜í•œ ë¶„ëª… ë‚´ PCì—ì„œ ë™ì‘í•˜ëŠ” í´ëŸ¬ìŠ¤í„°ì´ê¸° ë•Œë¬¸ì— ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„  í¬íŠ¸í¬ì›Œë”©ì„ ì´ìš©í•´ í´ëŸ¬ìŠ¤í„° ë‚´ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.</p>\n<p>ì´ë¥¼ í†µí•´ ClusterIP + NodePortë¡œ ì ‘ê·¼í–ˆë˜ ê²ƒì´ Local IP + Local Port ë¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•´ì§€ëŠ” ê²ƒì´ë‹¤. ì´ëŠ” ë˜ Local PCê°€ ì—°ê²°ëœ ë„¤íŠ¸ì›Œí¬ì˜ í¬íŠ¸í¬ì›Œë”©ì„ í†µí•´ ì™¸ë¶€ IPë¡œì„œë„ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì´ì•¼ê¸°ë‹¤. </p>\n<p>í¬íŠ¸í¬ì›Œë”©ìœ¼ë¡œ í´ëŸ¬ìŠ¤í„° ë‚´ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ‘ê·¼ (ë¡œì»¬í¬íŠ¸ì™€ ì„œë¹„ìŠ¤í¬íŠ¸ì˜ ì—°ê²°)</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">kubectl port-forward service/mnist-service <span class=\"token number\">5000</span>:1234\n<span class=\"token comment\"># ì´ëŠ” </span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>ì°¸ê³ : kubectl port-forward ëŠ” í”„ë¡¬í”„íŠ¸ë¥¼ ë¦¬í„´í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ì´ ì—°ìŠµì„ ê³„ì†í•˜ë ¤ë©´ ë‹¤ë¥¸ í„°ë¯¸ë„ì„ ì—´ì–´ì•¼ í•œë‹¤.  (<a href=\"https://kubernetes.io/ko/docs/tasks/access-application-cluster/port-forward-access-application-cluster/\">ì°¸ì¡°</a>)</p>\n<p>5000ì€ ë¡œì»¬ í¬íŠ¸ë¥¼ 1234ëŠ” ìœ„ì—ì„œ <code class=\"language-text\">kubectl describe services/mnist-service</code> ë¥¼ ì‹¤í–‰í•´ ë³´ì•˜ë˜ Service Portì´ë‹¤. </p>\n<p>ì´ì œ <a href=\"http://localhost:5000\">localhost:5000</a> ëŠ” ì„œë¹„ìŠ¤í¬íŠ¸ 1234ì— ì ‘ê·¼í•˜ëŠ” ê²ƒê³¼ ë™ì¼í•˜ë‹¤. ì´ëŠ” ë˜ ë‹¤ì‹œ ClusterIP + NodePortì™€ ë™ì¼í•˜ë‹¤. </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\"># ë˜ ë‹¤ë¥¸ í„°ë¯¸ë„ì„ ì—´ì–´ í™•ì¸í•˜ì˜€ë‹¤.</span>\n<span class=\"token operator\">></span> <span class=\"token function\">curl</span> localhost:5000\n<span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"error\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"use POST /prediction instead of root route\"</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>\n<p>local IPê°€ ì•„ë‹ˆë¼ ì™¸ë¶€ IPì—ì„œë„ ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ì„¤ì •í•˜ê¸°</p>\n<p>ì¿ ë²„ë„¤í‹°ìŠ¤ê°€ ë™ì‘í•˜ëŠ” PCì˜ ë„¤íŠ¸ì›Œí¬ì˜ í¬íŠ¸í¬ì›Œë”©ì„ í•´ì•¼í•œë‹¤. ë‚˜ì˜ ê²½ìš° ë‚´ PCëŠ” iptime ê³µìœ ê¸°ì— ì—°ê²°ë˜ì–´ ìˆë‹¤. </p>\n<p>iptimeì˜ ê²½ìš° ê³ ê¸‰ì„¤ì • - NAT/ë¼ìš°í„° ê´€ë¦¬ - í¬íŠ¸í¬ì›Œë“œ ì„¤ì •ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •ì„ ì¶”ê°€í•´ì£¼ë©´ ëœë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d312e57426ffae3155fdabef74eb9bbe/203d3/Untitled.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 4.25531914893617%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsSAAALEgHS3X78AAAAUUlEQVQI1x3KSwqAIABF0fa/oD4EWTgwyBKjsAwaBUkt4qbN3j28rOoMbe/Qy0UtLamVObH+YXL3b0WjKcSIHDzz8SLUSh6tjJZ2+potYPfAB65QRAlC/FnKAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/d312e57426ffae3155fdabef74eb9bbe/1d69c/Untitled.png\"\n        srcset=\"/static/d312e57426ffae3155fdabef74eb9bbe/4dcb9/Untitled.png 188w,\n/static/d312e57426ffae3155fdabef74eb9bbe/5ff7e/Untitled.png 375w,\n/static/d312e57426ffae3155fdabef74eb9bbe/1d69c/Untitled.png 750w,\n/static/d312e57426ffae3155fdabef74eb9bbe/78797/Untitled.png 1125w,\n/static/d312e57426ffae3155fdabef74eb9bbe/203d3/Untitled.png 1322w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>ê·¸ë¦¬ê³  í¬íŠ¸í¬ì›Œë”© í•  ë•Œ í•˜ë‚˜ì˜ ì˜µì…˜ì„ ì¶”ê°€í•´ì•¼ í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">kubectl port-forward service/mnist-service <span class=\"token number\">5000</span>:1234 --address <span class=\"token number\">0.0</span>.0.0</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>address ì— ëŒ€í•œ ë¶€ë¶„ì¸ë° ê¸°ë³¸ê°’ì€ <a href=\"http://localhost\">localhost</a> ì¦‰ 127.0.0.1 ì´ë‹¤. ì´ë¥¼ ëª¨ë“  ë„¤íŠ¸ì›Œí¬ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ 0.0.0.0 ìœ¼ë¡œ ë³€ê²½í•´ì£¼ì—ˆë‹¤.</p>\n<p>ì´ì œ ë‚˜ëŠ” ì§€ê¸ˆ ì¹´í˜ì— ìˆëŠ”ë° ì§‘ì— ìˆëŠ” PCì˜ ì™¸ë¶€ IP + 5000 ìœ¼ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ Cluster ìœ„ì—ì„œ ë™ì‘í•˜ëŠ” Podì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token punctuation\">(</span>base<span class=\"token punctuation\">)</span>  suwan@Suwan-mac î‚° ~ î‚° <span class=\"token function\">curl</span> <span class=\"token number\">182.161</span>.xxx.200:5000\n<span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"error\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"use POST /prediction instead of root route\"</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h4 id=\"âœ“-run-react-app\" style=\"position:relative;\"><a href=\"#%E2%9C%93-run-react-app\" aria-label=\"âœ“ run react app permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>âœ“ Run React App</strong></h4>\n<p>ì‚¬ìš©ìê°€ ì´ë¯¸ì§€ë¥¼ ì…ë ¥í•˜ê³  ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ Reactë¡œ ë§Œë“¤ì—ˆë‹¤. Kubernetes ìœ„ì— ë°°í¬í•´ë³´ì.</p>\n<p>ë°©ê¸ˆì „ì— í•œ MNIST Serving ê³¼ ê±°ì˜ ë˜‘ê°™ë‹¤. Deploymentë¥¼ ë§Œë“¤ê³  Service ì—°ê²°í•˜ë©´ëœë‹¤.</p>\n<details>\n<summary>mnist-web.yaml</summary>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>web<span class=\"token punctuation\">-</span>deployment\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>web\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>web\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>web\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>web\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> ssuwani/mnist_web<span class=\"token punctuation\">-</span>app</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</details>\n<details>\n<summary>mnist-web-service.yaml</summary>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>web<span class=\"token punctuation\">-</span>service\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">-</span>web\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n      <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> NodePort</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<details>\n  \n    \n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">kubectl apply -f mnist-web.yaml\nkubectl apply -f mnist-web-service.yaml</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><strong>ë™ì‘í™•ì¸</strong></p>\n<p>ìœ„ì—ì„œ í–ˆë˜ ê²ƒì²˜ëŸ¼ Cluster IP + NodePort ì— ì ‘ê·¼í•˜ë©´ ì •ìƒì ìœ¼ë¡œ ë™ì‘ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. Localì—ì„œ í´ëŸ¬ìŠ¤í„° ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ kubectl port-forward í•´ë³´ì</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">kubectl port-forward service/mnist-web-service <span class=\"token number\">8888</span>:80</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><a href=\"http://localhost:8888\">localhost:8888</a> ì— ì ‘ê·¼í•´ë³´ì</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/576c4ebf6b24d4d99866c9ce64ba3a8f/d9ed5/Untitled1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.659574468085104%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAAA70lEQVQoz62SwWqEMBRF/f9v6bL7rrrrquCiQjVKwIaoRI2JUZPbSawgUzvjQB8cngl5hyu8yDmHPb7mecY4jpimCcsyh7P/9hhjYK0N765nPdGRkHOOJEmQ5znKskSapiiKAoQQUEqhlHpM6NP1vUTXdRBChN62bUi3ljuU/RJauwrjD4Gn5wJVY37G8WeiUwm7XuOLCZhpuZnmrtAPW7flOZ/q7i/nVOHlleOTyIelh0JCBd7eORjXa+rLmpwW4p8r0lpjj18Z34dBXRggpQzd3++5ntuI6rrGRlVVaJomLHQcx4Esy8AYw/7dLb4BGe9ce8bzgmYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/576c4ebf6b24d4d99866c9ce64ba3a8f/1d69c/Untitled1.png\"\n        srcset=\"/static/576c4ebf6b24d4d99866c9ce64ba3a8f/4dcb9/Untitled1.png 188w,\n/static/576c4ebf6b24d4d99866c9ce64ba3a8f/5ff7e/Untitled1.png 375w,\n/static/576c4ebf6b24d4d99866c9ce64ba3a8f/1d69c/Untitled1.png 750w,\n/static/576c4ebf6b24d4d99866c9ce64ba3a8f/78797/Untitled1.png 1125w,\n/static/576c4ebf6b24d4d99866c9ce64ba3a8f/aa440/Untitled1.png 1500w,\n/static/576c4ebf6b24d4d99866c9ce64ba3a8f/d9ed5/Untitled1.png 2880w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>ìµœì¢… ë™ì‘ í™•ì¸ì„ ìœ„í•´ mnist-serviceì— ë‹¤ì‹œ ì—°ê²°í•´ë³´ì</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">kubectl port-forward service/mnist-service <span class=\"token number\">5000</span>:1234</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>ì´ì œ <a href=\"http://localhost:5000\">localhost:5000</a> ì„ í†µí•´ MNIST Serving Flask APP ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ì•„ë˜ì˜ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ì•„ì„œ ê²°ê³¼ê°€ ì˜ ë‚˜ì˜¤ëŠ”ì§€ í™•ì¸í•´ë³´ì</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 28px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3259622e110dbdbf330e3b63b7777010/dcb9a/img_0.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAIFAwT/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHF9U9TMAoJB//EABsQAAMAAgMAAAAAAAAAAAAAAAECAwAQBBIT/9oACAEBAAEFApTNXaUvDOKOxRWjHRYtr//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EAB8QAAIBBAIDAAAAAAAAAAAAAAECEgADEBETISJBkf/aAAgBAQAGPwKI+0z2yxie94dPbLoVd5BGQ0Ac+RJx/8QAHBABAAEFAQEAAAAAAAAAAAAAAREAEDFBUWFx/9oACAEBAAE/ISKBtWApiMMW3tomYb9eVJ7C3DbFNTCdZt//2gAMAwEAAgADAAAAEPAPAP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EABwQAQACAgMBAAAAAAAAAAAAAAEAESExEEFRkf/aAAgBAQABPxC28joEWrCRcSAXoGQv3ihJ+LV4P0CR2oAlN2UPA7juCoRRNJDyEULUPM8f/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_0.jpg\"\n        title=\"img_0.jpg\"\n        src=\"/static/3259622e110dbdbf330e3b63b7777010/dcb9a/img_0.jpg\"\n        srcset=\"/static/3259622e110dbdbf330e3b63b7777010/dcb9a/img_0.jpg 28w\"\n        sizes=\"(max-width: 28px) 100vw, 28px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 28px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/26c0a28d9d53b9bf70d37c1fb8b153fa/dcb9a/img_1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQDBv/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAefonuIQNAzB/8QAGxAAAQQDAAAAAAAAAAAAAAAAAQACAxAEEjH/2gAIAQEAAQUCT49Y6yeUXEhf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAGxAAAQQDAAAAAAAAAAAAAAAAAQIDEDEAQWP/2gAIAQEABj8CxtW1S0OYkAmqj//EABsQAQACAgMAAAAAAAAAAAAAAAEQESFhAFGh/9oACAEBAAE/IeFeNK11mVpnpK+Ex0j/2gAMAwEAAgADAAAAEEAIAP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EAB4QAQACAgEFAAAAAAAAAAAAAAERMQAQIUFRYYGh/9oACAEBAAE/EC8kbK4cAge70ZwYBwjvJfui8LsyD0XB41//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_1.jpg\"\n        title=\"img_1.jpg\"\n        src=\"/static/26c0a28d9d53b9bf70d37c1fb8b153fa/dcb9a/img_1.jpg\"\n        srcset=\"/static/26c0a28d9d53b9bf70d37c1fb8b153fa/dcb9a/img_1.jpg 28w\"\n        sizes=\"(max-width: 28px) 100vw, 28px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 28px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/481fc219229573667e874d45c37bc7d9/dcb9a/img_2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAIFBAb/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHD0o7Tz6hIAP/EABoQAAMBAAMAAAAAAAAAAAAAAAECAwQAEBH/2gAIAQEAAQUCQAuc8WHM8JOgbLJiPG7/AP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EAB8QAAICAgEFAAAAAAAAAAAAAAECESEAAxASIDFRUv/aAAgBAQAGPwIBjA94w07JZbvgs738zGEI1sI6vIGETPZ//8QAHRABAAEEAwEAAAAAAAAAAAAAAREAIUFhECBRsf/aAAgBAQABPyGbXt/FMnNoTXFphcH1TdiqCIBBiTPT/9oADAMBAAIAAwAAABBgAAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAeEAEAAgIBBQAAAAAAAAAAAAABESEAUTEQIGGB8P/aAAgBAQABPxCOhBFMN4mDrBSLFBfQn4oAyNr7YgFTDd2/GEQDDig8njs//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_2.jpg\"\n        title=\"img_2.jpg\"\n        src=\"/static/481fc219229573667e874d45c37bc7d9/dcb9a/img_2.jpg\"\n        srcset=\"/static/481fc219229573667e874d45c37bc7d9/dcb9a/img_2.jpg 28w\"\n        sizes=\"(max-width: 28px) 100vw, 28px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h4 id=\"âœ“-etc\" style=\"position:relative;\"><a href=\"#%E2%9C%93-etc\" aria-label=\"âœ“ etc permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>âœ“ ETC</strong></h4>\n<ul>\n<li>\n<p>Service Type(NodePort) ì— ëŒ€í•œ ë‚´ìš© ë” ê³µë¶€í•˜ì.</p>\n<p><a href=\"https://kubernetes.io/ko/docs/concepts/services-networking/service/\">ì„œë¹„ìŠ¤</a></p>\n</li>\n</ul>","tableOfContents":"<ul>\n<li>\n<p><a href=\"/category/blog/mnist-classification/4-kubernetes/#kubernetes-%EC%9C%84%EC%97%90-%EC%98%AC%EB%A0%A4%EB%B3%B4%EC%9E%90\">Kubernetes ìœ„ì— ì˜¬ë ¤ë³´ì</a></p>\n<ul>\n<li>\n<ul>\n<li>\n<p><a href=\"/category/blog/mnist-classification/4-kubernetes/#-stack\">ğŸ“š Stack</a></p>\n<ul>\n<li><a href=\"/category/blog/mnist-classification/4-kubernetes/#%E2%9C%93-pv--pvc\"><strong>âœ“ PV &#x26; PVC</strong></a></li>\n<li><a href=\"/category/blog/mnist-classification/4-kubernetes/#%E2%9C%93-mnist-train--save-model-in-pvc\"><strong>âœ“ MNIST Train &#x26; Save Model in PVC</strong></a></li>\n<li><a href=\"/category/blog/mnist-classification/4-kubernetes/#%E2%9C%93-mnist-serving-deployment--service\"><strong>âœ“ MNIST Serving (Deployment + Service)</strong></a></li>\n<li><a href=\"/category/blog/mnist-classification/4-kubernetes/#%E2%9C%93-run-react-app\"><strong>âœ“ Run React App</strong></a></li>\n<li><a href=\"/category/blog/mnist-classification/4-kubernetes/#%E2%9C%93-etc\"><strong>âœ“ ETC</strong></a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"[MNIST Classification - 4] Kubernetes ìœ„ì— ì˜¬ë ¤ë³´ì","description":"","date":"2021.10.12","emoji":"ğŸ“š","category":"blog"}}},"pageContext":{"slug":"/category/blog/mnist-classification/4-kubernetes/","relatedPosts":[{"node":{"fields":{"slug":"/category/blog/interview/"},"frontmatter":{"title":"[ë©´ì ‘ì¤€ë¹„] minimum ì§ˆë¬¸&ë‹µë³€","date":"2021.11.22","emoji":"â“","category":"blog"}}},{"node":{"fields":{"slug":"/category/blog/hackerrank_certification/"},"frontmatter":{"title":"í•´ì»¤ë­í¬ ì¸ì¦ì„œ ë°œê¸‰ í›„ê¸°","date":"2021.11.19","emoji":"ğŸ“š","category":"blog"}}},{"node":{"fields":{"slug":"/category/blog/m1-tensorflow/"},"frontmatter":{"title":"[Tensorflow] M1ì—ì„œ Tensorflow GPU ì‚¬ìš©í•˜ê¸° (Monterey)","date":"2021.11.13","emoji":"ğŸ’ª","category":"blog"}}},{"node":{"fields":{"slug":"/category/blog/effective-python/"},"frontmatter":{"title":"[ì±…] íŒŒì´ì¬ ì½”ë”©ì˜ ê¸°ìˆ ","date":"2021.11.02","emoji":"ğŸ“š","category":"blog"}}},{"node":{"fields":{"slug":"/category/blog/mlops/simple_model_deploy_mnist/"},"frontmatter":{"title":"[MLOps] Vertex AIì—ì„œ ëª¨ë¸ ë°°í¬í•˜ê¸° (MNIST)","date":"2021.11.01","emoji":"ğŸƒ","category":"blog"}}}]}}}