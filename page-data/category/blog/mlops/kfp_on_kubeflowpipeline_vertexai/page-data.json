{"componentChunkName":"component---src-templates-post-tsx","path":"/category/blog/mlops/kfp_on_kubeflowpipeline_vertexai/","result":{"data":{"site":{"siteMetadata":{"title":"ì–´ì„œOpShow","author":"ì¥ìˆ˜ì™„","siteUrl":"https://ssuwani.github.io"}},"markdownRemark":{"id":"5a1f4e11-eb97-5ba0-8a7d-5f9a35478e1c","excerpt":"KFP v2 on Kubeflow Pipeline and Vertex AI í•˜ë‚˜ì˜ ì½”ë“œë¡œ ë‘ í”Œë«í¼ì— Pipeline ì„ ì‹¤í–‰í•´ë³´ì Reference Introducing Kubeflow Pipelines SDK v2 Google Cloud - build pipeline Kubeflowâ€¦","html":"<h1 id=\"kfp-v2-on-kubeflow-pipeline-and-vertex-ai\" style=\"position:relative;\"><a href=\"#kfp-v2-on-kubeflow-pipeline-and-vertex-ai\" aria-label=\"kfp v2 on kubeflow pipeline and vertex ai permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>KFP v2 on Kubeflow Pipeline and Vertex AI</h1>\n<blockquote>\n<p>í•˜ë‚˜ì˜ ì½”ë“œë¡œ ë‘ í”Œë«í¼ì— Pipeline ì„ ì‹¤í–‰í•´ë³´ì</p>\n</blockquote>\n<p><strong>Reference</strong></p>\n<ul>\n<li><a href=\"https://www.kubeflow.org/docs/components/pipelines/sdk/v2/v2-compatibility/\">Introducing Kubeflow Pipelines SDK v2</a></li>\n<li><a href=\"https://cloud.google.com/vertex-ai/docs/pipelines/build-pipeline\">Google Cloud - build pipeline</a></li>\n</ul>\n<p>Kubeflow ê³µì‹ë¬¸ì„œì— kfp v2ë¡œ Kubeflow Pipelineì„ ë°°í¬í•˜ëŠ” ë²•, Google Cloud ê³µì‹ë¬¸ì„œì— kfp v2ë¡œ Vertex Aiì— ë°°í¬í•˜ëŠ”ë²•ì´ ì„¤ëª…ë˜ì–´ ìˆë‹¤. ì´ í¬ìŠ¤íŒ…ì€ ê·¸ ë‘ê°œë¥¼ í•©ì¹œ í¬ìŠ¤íŒ…ë°–ì— ë˜ì§€ ëª»í•œë‹¤. ê° í”Œë«í¼ë§ˆë‹¤ì˜ ì¥ë‹¨ì ì´ ì¡´ì¬í•˜ëŠ” ê²ƒ ê°™ì•„ í•„ìš”ì— ë”°ë¼ ë°°í¬ í”ŒíŒ»í¼ì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì„ ìƒê¸°í•˜ê¸° ìœ„í•´ í¬ìŠ¤íŒ…ì„ ì‘ì„±í•´ë³¸ë‹¤.</p>\n<p>ë‚´ê°€ ìƒê°í•˜ëŠ” Vertex AIì˜ ë‹¨ì </p>\n<ul>\n<li>ì¡°ê¸ˆ ë” ì¶”ìƒì ì´ë‹¤. Vertex AIëŠ” Kubeflow Pipelineì„ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš©ì ì¹œí™”ì ìœ¼ë¡œ ë§Œë“  Wrapperì´ë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì¸ ê²ƒ ê°™ì€ë°, Pipelineì„ ë§Œë“¤ê³  ì‹¤í–‰ì„ í•˜ë©´ Componentë“¤ì´ ê²°êµ­ Pod ë‹¨ìœ„ë¡œ ì‹¤í–‰ë˜ëŠ”ë°, <code class=\"language-text\">kubectl</code> ë¡œ Podì˜ ìƒíƒœê°€ ì¡°íšŒê°€ ì•ˆëœë‹¤. <a href=\"https://towardsdatascience.com/serverless-machine-learning-pipelines-with-vertex-ai-an-introduction-30af8b53188e\">ì—¬ê¸°</a>ë¥¼ ë³´ë‹ˆ ë§ˆì¹¨ë‚´ Vertex AIì—ì„œ serverless Pipelineì„ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤ëŠ”ë° ê·¸ê²Œ Podì˜ ì¡°íšŒê°€ ì•ˆë˜ëŠ” ê²ƒê³¼ ìƒê´€ì´ ìˆëŠ”ì§€ ëª¨ë¥´ê² ë‹¤. ì—¬íŠ¼ ì•ˆëœë‹¤. Kubeflow Pipelineì—ì„œëŠ” ëœë‹¤.</li>\n</ul>\n<p>ë‹¨ì ì˜ ë‚´ìš©ì€ í™•ì‹¤í•˜ì§€ ì•Šë‹¤. ê·¸ë¦¬ê³  ì¥ì ì— ëŒ€í•´ì„œ ì–¸ê¸‰í•˜ê¸° ìœ„í•´ ê³µë¶€í•˜ë˜ ì¤‘ ë¹„êµí•´ë†“ì€ <a href=\"https://cloud.google.com/vertex-ai/docs/pipelines/build-pipeline#compare\">ê³µì‹ë¬¸ì„œ</a>ê°€ ìˆë‹¤.! ì½ë‹¤ë³´ë‹ˆ ì´ì •ë„ë©´ ê·¸ëƒ¥ Vertex AIë¥¼ ì‚¬ìš©í•˜ëŠ”ê²Œ ë§ì§€ ì•Šë‚˜ì‹¶ë‹¤.. Vertex AIì—ì„  Cloud Storageë¥¼ ì§€ì •í•˜ë©´ ì•Œì•„ì„œ ë§ˆìš´íŠ¸ëœ ë³¼ë¥¨ìœ¼ë¡œ ì„œ ì´ìš©í•  ìˆ˜ ìˆì–´ ë˜ê²Œ í¸í–ˆë‹¤. í•˜ì§€ë§Œ Kubeflow Pipelineì—ì„œëŠ” ì•ˆë˜ëŠ” ë“¯ í•˜ë‹¤. **ê·¸ë˜ì„œ ë‹¨ìˆœíˆ ë°°í¬ ë°©ì‹ì„ ë³€ê²½í•œë‹¤ê³  í•´ì„œ ë‘ê°œì˜ í”Œë«í¼ì—ì„œ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•œë‹¤ê³  ë‹¨ì–¸í•˜ì§€ëŠ” ëª»í•œë‹¤. ** </p>\n<p><em>kfp versionì€ â€˜1.8.6â€™ ì´ë‹¤</em></p>\n<h2 id=\"add-component-ì‘ì„±í•˜ê¸°\" style=\"position:relative;\"><a href=\"#add-component-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"add component ì‘ì„±í•˜ê¸° permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Add Component ì‘ì„±í•˜ê¸°</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\"><span class=\"token keyword\">import</span> kfp\n<span class=\"token keyword\">import</span> kfp<span class=\"token punctuation\">.</span>dsl <span class=\"token keyword\">as</span> dsl\n<span class=\"token keyword\">from</span> kfp<span class=\"token punctuation\">.</span>v2<span class=\"token punctuation\">.</span>dsl <span class=\"token keyword\">import</span> component\n\n<span class=\"token decorator annotation punctuation\">@component</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">:</span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">:</span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">'''Calculates sum of two arguments'''</span>\n    <span class=\"token keyword\">return</span> a <span class=\"token operator\">+</span> b\n\n<span class=\"token decorator annotation punctuation\">@dsl<span class=\"token punctuation\">.</span>pipeline</span><span class=\"token punctuation\">(</span>\n    name<span class=\"token operator\">=</span><span class=\"token string\">'addition-pipeline'</span><span class=\"token punctuation\">,</span>\n    description<span class=\"token operator\">=</span><span class=\"token string\">'An example pipeline that performs addition calculations.'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\"># pipeline_root='gs://my-pipeline-root/example-pipeline'</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">add_pipeline</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">:</span> <span class=\"token builtin\">float</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">:</span> <span class=\"token builtin\">float</span><span class=\"token operator\">=</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    add_task <span class=\"token operator\">=</span> add<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id=\"kubeflow-pipelinesì—-ë°°í¬í•˜ê¸°\" style=\"position:relative;\"><a href=\"#kubeflow-pipelines%EC%97%90-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\" aria-label=\"kubeflow pipelinesì— ë°°í¬í•˜ê¸° permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kubeflow Pipelinesì— ë°°í¬í•˜ê¸°</h4>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\">KUBEFLOW_PIPELINES_HOST <span class=\"token operator\">=</span> <span class=\"token string\">\"&lt;Kubeflow Pipelines HOST URL>\"</span>\n\n<span class=\"token keyword\">from</span> kfp <span class=\"token keyword\">import</span> compiler\ncompiler<span class=\"token punctuation\">.</span>Compiler<span class=\"token punctuation\">(</span>mode<span class=\"token operator\">=</span>kfp<span class=\"token punctuation\">.</span>dsl<span class=\"token punctuation\">.</span>PipelineExecutionMode<span class=\"token punctuation\">.</span>V2_COMPATIBLE<span class=\"token punctuation\">)</span>\\\n<span class=\"token punctuation\">.</span><span class=\"token builtin\">compile</span><span class=\"token punctuation\">(</span>pipeline_func<span class=\"token operator\">=</span>add_pipeline<span class=\"token punctuation\">,</span> package_path<span class=\"token operator\">=</span><span class=\"token string\">'pipeline.yaml'</span><span class=\"token punctuation\">)</span>\n\nclient <span class=\"token operator\">=</span> kfp<span class=\"token punctuation\">.</span>Client<span class=\"token punctuation\">(</span>host<span class=\"token operator\">=</span>KUBEFLOW_PIPELINES_HOST<span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># run the pipeline in v2 compatibility mode</span>\nclient<span class=\"token punctuation\">.</span>create_run_from_pipeline_func<span class=\"token punctuation\">(</span>\n    add_pipeline<span class=\"token punctuation\">,</span>\n    arguments<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    mode<span class=\"token operator\">=</span>kfp<span class=\"token punctuation\">.</span>dsl<span class=\"token punctuation\">.</span>PipelineExecutionMode<span class=\"token punctuation\">.</span>V2_COMPATIBLE<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id=\"vertex-ai-pipelineì—-ë°°í¬í•˜ê¸°\" style=\"position:relative;\"><a href=\"#vertex-ai-pipeline%EC%97%90-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\" aria-label=\"vertex ai pipelineì— ë°°í¬í•˜ê¸° permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vertex AI Pipelineì— ë°°í¬í•˜ê¸°</h4>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\">PROJECT_ID <span class=\"token operator\">=</span> <span class=\"token string\">\"&lt;Project ID>\"</span>\nREGION <span class=\"token operator\">=</span> <span class=\"token string\">\"&lt;Region: where you want deploy>\"</span>\nBUCKET_URI <span class=\"token operator\">=</span> <span class=\"token string\">\"&lt;Bucket URI>\"</span>\n<span class=\"token keyword\">from</span> kfp<span class=\"token punctuation\">.</span>v2 <span class=\"token keyword\">import</span> compiler\n<span class=\"token keyword\">from</span> kfp<span class=\"token punctuation\">.</span>v2<span class=\"token punctuation\">.</span>google<span class=\"token punctuation\">.</span>client <span class=\"token keyword\">import</span> AIPlatformClient\ncompiler<span class=\"token punctuation\">.</span>Compiler<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">compile</span><span class=\"token punctuation\">(</span>pipeline_func<span class=\"token operator\">=</span>add_pipeline<span class=\"token punctuation\">,</span>\n        package_path<span class=\"token operator\">=</span><span class=\"token string\">'add_pipeline.json'</span><span class=\"token punctuation\">)</span>\n\napi_client <span class=\"token operator\">=</span> AIPlatformClient<span class=\"token punctuation\">(</span>project_id<span class=\"token operator\">=</span>PROJECT_ID<span class=\"token punctuation\">,</span> region<span class=\"token operator\">=</span>REGION<span class=\"token punctuation\">)</span>\n\nresponse <span class=\"token operator\">=</span> api_client<span class=\"token punctuation\">.</span>create_run_from_job_spec<span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'add_pipeline.json'</span><span class=\"token punctuation\">,</span>\n    pipeline_root<span class=\"token operator\">=</span>BUCKET_URI<span class=\"token punctuation\">,</span>\n    parameter_values<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'a'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'b'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","tableOfContents":"<ul>\n<li>\n<p><a href=\"/category/blog/mlops/kfp_on_kubeflowpipeline_vertexai/#kfp-v2-on-kubeflow-pipeline-and-vertex-ai\">KFP v2 on Kubeflow Pipeline and Vertex AI</a></p>\n<ul>\n<li>\n<p><a href=\"/category/blog/mlops/kfp_on_kubeflowpipeline_vertexai/#add-component-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0\">Add Component ì‘ì„±í•˜ê¸°</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"/category/blog/mlops/kfp_on_kubeflowpipeline_vertexai/#kubeflow-pipelines%EC%97%90-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\">Kubeflow Pipelinesì— ë°°í¬í•˜ê¸°</a></li>\n<li><a href=\"/category/blog/mlops/kfp_on_kubeflowpipeline_vertexai/#vertex-ai-pipeline%EC%97%90-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\">Vertex AI Pipelineì— ë°°í¬í•˜ê¸°</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"[MLOps] KFP v2 on Kubeflow Pipeline and Vertex AI","description":"","date":"2021.10.28","emoji":"ğŸ‘·","category":"blog"}}},"pageContext":{"slug":"/category/blog/mlops/kfp_on_kubeflowpipeline_vertexai/","relatedPosts":[{"node":{"fields":{"slug":"/category/blog/interview/"},"frontmatter":{"title":"[ë©´ì ‘ì¤€ë¹„] minimum ì§ˆë¬¸&ë‹µë³€","date":"2021.11.22","emoji":"â“","category":"blog"}}},{"node":{"fields":{"slug":"/category/blog/hackerrank_certification/"},"frontmatter":{"title":"í•´ì»¤ë­í¬ ì¸ì¦ì„œ ë°œê¸‰ í›„ê¸°","date":"2021.11.19","emoji":"ğŸ“š","category":"blog"}}},{"node":{"fields":{"slug":"/category/blog/m1-tensorflow/"},"frontmatter":{"title":"[Tensorflow] M1ì—ì„œ Tensorflow GPU ì‚¬ìš©í•˜ê¸° (Monterey)","date":"2021.11.13","emoji":"ğŸ’ª","category":"blog"}}},{"node":{"fields":{"slug":"/category/blog/effective-python/"},"frontmatter":{"title":"[ì±…] íŒŒì´ì¬ ì½”ë”©ì˜ ê¸°ìˆ ","date":"2021.11.02","emoji":"ğŸ“š","category":"blog"}}},{"node":{"fields":{"slug":"/category/blog/mlops/simple_model_deploy_mnist/"},"frontmatter":{"title":"[MLOps] Vertex AIì—ì„œ ëª¨ë¸ ë°°í¬í•˜ê¸° (MNIST)","date":"2021.11.01","emoji":"ğŸƒ","category":"blog"}}}]}}}