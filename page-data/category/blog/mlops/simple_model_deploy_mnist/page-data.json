{"componentChunkName":"component---src-templates-post-tsx","path":"/category/blog/mlops/simple_model_deploy_mnist/","result":{"data":{"site":{"siteMetadata":{"title":"ì–´ì„œOpShow","author":"ì¥ìˆ˜ì™„","siteUrl":"https://ssuwani.github.io"}},"markdownRemark":{"id":"f7832544-1e6e-554b-98c4-afa4344adc0e","excerpt":"ê°„ë‹¨í•œ ì½”ë“œë¡œ Vertex AIì—ì„œ ëª¨ë¸ í•™ìŠµ ë° ë°°í¬í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤. MNIST ë°ì´í„°ëŠ” ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ê³¼ì •ì„ ê°„ë‹¨í•˜ê²Œ ë¡œ í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì•„ë˜ì™€ ê°™ì´ ê°„ë‹¨íˆ 2ê°œì˜ ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤. Load data & Training Deploy with endpointâ€¦","html":"<blockquote>\n<p>ê°„ë‹¨í•œ ì½”ë“œë¡œ Vertex AIì—ì„œ ëª¨ë¸ í•™ìŠµ ë° ë°°í¬í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤.</p>\n</blockquote>\n<p>MNIST ë°ì´í„°ëŠ” ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ê³¼ì •ì„ ê°„ë‹¨í•˜ê²Œ <code class=\"language-text\">load_data</code>ë¡œ í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì•„ë˜ì™€ ê°™ì´ ê°„ë‹¨íˆ 2ê°œì˜ ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤.</p>\n<ul>\n<li>Load data &#x26; Training</li>\n<li>Deploy with endpoint</li>\n</ul>\n<p>ì•„ë˜ì˜ ê³¼ì •ì„ ë”°ë¼ì˜¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ íŒŒì´í”„ë¼ì¸ì„ ì„¤ê³„í•  ìˆ˜ ìˆë‹¤.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 716px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8ceb8ea31754ae3312b62dd43d5264ca/6bbf7/simple_pipeline.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 108.51063829787235%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC2ElEQVQ4y5VVy1LbQBD0p+eaPyCXHHNJ5ZBbciI5UORCUSkIgRiMbfzAb0mrfa/UzKyQLMcuElQ1pd3Vera3e3rcKYoCdTjnAVCUHs57lGUZg5/6XT885/3GWUirYL2DNAqdOlkIBcpg8f1a43rqEZxGfzCkGKDbvcV4PMF9v4/efR83f7qYTh+bA88ml/h09QWrfLNN6EMACoujbxLH14zS4aZ7h8FwRPEAmWfIhEAuMiTJBmmaNmiP+z/w9uQdEpVtE3IopeCshncmjkWeQ9JbKoP7uUUgGgYLB2U8PF3RGINcSUySGabpHPN0uZvQORcTqCY0jFbYZArDuYQljsZLicVGQmsJKdt7GYxDJ9BV20lrXjjqudD8jUUpWQ1kPOc9B/bvJWyLVNA35wusc14LlXD0FtJFhau13d93DiVrJ7U6g5UTWGsjSqZlLC02uuL079+8mJDRWbUC8gvizMY1S0KcpwYDoVG46pBXIKTr5RLzdRZJZ5601rF0cioh91qEsT59wEq4KMB2zcfDAnN4KGFZi9BCFsehIl2asFW9pWw1344blZlo9nAILiLipyoZ4jGU+D1xJICDdS7u5VBGQ1sDw0FGqG/QiRVPCp7eGqxlQRYTuOv1yKtTPM5muL3rYTxbN4fUqCwdfvpwjpPhGVIp6DZFpIAQerKPxZvPAr8mrGqGn5dXsQlwwuViRspqHHren3/E0dmHiLamqcMEs8Xq6/A4f7aUoIOWedWmRisT/cv16GmeKYFR8hhjLZKIuhEllgI1ghiSg7xKpp8uBXpTQZ7NcTMSSDPR7OPGIah0OPiQxnpb/2LHl7yQqlD5N/JHnjZF01zb+3ZU3ivmZ3WNoyagykY9T6Qnsvq2V17/KmyuSUXiGLl4bgJFvJZWaSyTds3uJdxrX0WFzssRIC6gdOUKTSJg9ZUOWUeP/zfC+OdDygtRtXwWjNdYmIw6M/v4JYRPnBuxiueHkT4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"simple pipeline\" title=\"simple pipeline\" src=\"/static/8ceb8ea31754ae3312b62dd43d5264ca/6bbf7/simple_pipeline.png\" srcset=\"/static/8ceb8ea31754ae3312b62dd43d5264ca/4dcb9/simple_pipeline.png 188w,\n/static/8ceb8ea31754ae3312b62dd43d5264ca/5ff7e/simple_pipeline.png 375w,\n/static/8ceb8ea31754ae3312b62dd43d5264ca/6bbf7/simple_pipeline.png 716w\" sizes=\"(max-width: 716px) 100vw, 716px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span>\n<h2 id=\"0-import-library\" style=\"position:relative;\"><a href=\"#0-import-library\" aria-label=\"0 import library permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>0. Import Library</h2>\n<p>Libraryë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë¶€ë¶„ì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\"><span class=\"token keyword\">import</span> kfp\n<span class=\"token keyword\">from</span> kfp <span class=\"token keyword\">import</span> dsl\n<span class=\"token keyword\">from</span> kfp<span class=\"token punctuation\">.</span>v2 <span class=\"token keyword\">import</span> compiler\n<span class=\"token keyword\">from</span> kfp<span class=\"token punctuation\">.</span>v2<span class=\"token punctuation\">.</span>dsl <span class=\"token keyword\">import</span> <span class=\"token punctuation\">(</span>Artifact<span class=\"token punctuation\">,</span> Dataset<span class=\"token punctuation\">,</span> Input<span class=\"token punctuation\">,</span> InputPath<span class=\"token punctuation\">,</span> Model<span class=\"token punctuation\">,</span> Output<span class=\"token punctuation\">,</span>\n                        OutputPath<span class=\"token punctuation\">,</span> ClassificationMetrics<span class=\"token punctuation\">,</span> Metrics<span class=\"token punctuation\">,</span> component<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">from</span> google<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>aiplatform <span class=\"token keyword\">import</span> pipeline_jobs\n\n<span class=\"token keyword\">from</span> datetime <span class=\"token keyword\">import</span> datetime</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"1-load-data--training-component\" style=\"position:relative;\"><a href=\"#1-load-data--training-component\" aria-label=\"1 load data  training component permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Load data &#x26; Training Component</h2>\n<p>ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ì„œ ì „ì²˜ë¦¬ í•œ ë’¤ ëª¨ë¸ì„ ì •ì˜í•˜ê³  í•™ìŠµì„ ì§„í–‰í•  ê²ƒì´ë‹¤. ì‚¬ì‹¤ ê°ê°ì˜ ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬í˜„ì„ í•˜ëŠ” ê²ƒì´ ì˜³ì„ì§€ ëª¨ë¥´ê² ë‹¤. ê°„ë‹¨í•˜ê²Œ ë°°í¬ë¥¼ ìœ„í•œ í¬ìŠ¤íŒ…ì´ë‹ˆ í•˜ë‚˜ì˜ ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬ì„±í–ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@component</span><span class=\"token punctuation\">(</span>\n    packages_to_install<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"tensorflow\"</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 1</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">load_data_and_training</span><span class=\"token punctuation\">(</span>\n    output_model<span class=\"token punctuation\">:</span> Output<span class=\"token punctuation\">[</span>Model<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># 2</span>\n    metrics<span class=\"token punctuation\">:</span> Output<span class=\"token punctuation\">[</span>Metrics<span class=\"token punctuation\">]</span> <span class=\"token comment\"># 3</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">import</span> tensorflow <span class=\"token keyword\">as</span> tf\n    \n    mnist <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>datasets<span class=\"token punctuation\">.</span>mnist <span class=\"token comment\"># 4</span>\n    <span class=\"token punctuation\">(</span>train_x<span class=\"token punctuation\">,</span> train_y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>test_x<span class=\"token punctuation\">,</span> test_y<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> mnist<span class=\"token punctuation\">.</span>load_data<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    train_x <span class=\"token operator\">=</span> train_x <span class=\"token operator\">/</span> <span class=\"token number\">255.0</span>\n    test_x <span class=\"token operator\">=</span> test_x <span class=\"token operator\">/</span> <span class=\"token number\">255.0</span>\n    \n    model <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>Sequential<span class=\"token punctuation\">(</span> <span class=\"token comment\"># 5</span>\n        <span class=\"token punctuation\">[</span>\n            tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Flatten<span class=\"token punctuation\">(</span>input_shape<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">28</span><span class=\"token punctuation\">,</span> <span class=\"token number\">28</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'relu'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'softmax'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span>\n    model<span class=\"token punctuation\">.</span><span class=\"token builtin\">compile</span><span class=\"token punctuation\">(</span> <span class=\"token comment\"># 6</span>\n        optimizer<span class=\"token operator\">=</span><span class=\"token string\">'adam'</span><span class=\"token punctuation\">,</span>\n        loss<span class=\"token operator\">=</span><span class=\"token string\">'sparse_categorical_crossentropy'</span><span class=\"token punctuation\">,</span>\n        metrics<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'accuracy'</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span>\n    model<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>train_x<span class=\"token punctuation\">,</span> train_y<span class=\"token punctuation\">,</span> epochs<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 7</span>\n    loss<span class=\"token punctuation\">,</span> acc <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span>evaluate<span class=\"token punctuation\">(</span>test_x<span class=\"token punctuation\">,</span> test_y<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 8</span>\n    \n    metrics<span class=\"token punctuation\">.</span>log_metric<span class=\"token punctuation\">(</span><span class=\"token string\">\"acc\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>acc<span class=\"token operator\">*</span><span class=\"token number\">100.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 9</span>\n    metrics<span class=\"token punctuation\">.</span>log_metric<span class=\"token punctuation\">(</span><span class=\"token string\">\"loss\"</span><span class=\"token punctuation\">,</span> loss<span class=\"token punctuation\">)</span>\n    metrics<span class=\"token punctuation\">.</span>log_metric<span class=\"token punctuation\">(</span><span class=\"token string\">\"Model\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"LinearModel\"</span><span class=\"token punctuation\">)</span>\n    metrics<span class=\"token punctuation\">.</span>log_metric<span class=\"token punctuation\">(</span><span class=\"token string\">\"dataset size\"</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>train_x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    \n    model<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span>output_model<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 10</span>\n\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"Model saved path : </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>output_model<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"Model saved uri : </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>output_model<span class=\"token punctuation\">.</span>uri<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>ì½”ë“œ ì˜†ì— ì£¼ì„ìœ¼ë¡œ ìˆ«ìë¥¼ í‘œì‹œí•´ë‘ì—ˆë‹¤. ê°„ë‹¨í•˜ê²Œ ì„¤ëª…ì„ ì ì–´ë‘ë ¤ í•œë‹¤.</p>\n<ul>\n<li>\n<p>1: <code class=\"language-text\">kip.v2.dsl</code> ì— ì •ì˜ëœ <code class=\"language-text\">component</code>  ë°ì½”ë ˆì´í„°ì´ë‹¤. ì¼ë°˜ í•¨ìˆ˜ë¥¼ íŒŒì´í”„ë¼ì¸ ì»´í¬ë„ŒíŠ¸ë¡œ ë³€ê²½í•´ì¤€ë‹¤. 3ê°œì˜ argumentë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>\n<ul>\n<li><code class=\"language-text\">base_image</code> : ì§€ì •í•´ì£¼ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ì ìœ¼ë¡œ python:3.7 ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•œë‹¤.</li>\n<li><code class=\"language-text\">output_component_file</code> : componentì— ì •ì˜ëœ ë‚´ìš©ì„ <code class=\"language-text\">yaml</code> íŒŒì¼ë¡œ ì‘ì„±í•˜ì—¬ í˜‘ì—…ì„ ìœ„í•´ ì‚¬ìš©í•˜ê±°ë‚˜ ë‹¤ë¥¸ íŒŒì´í”„ë¼ì¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</li>\n<li><code class=\"language-text\">packages_to_install</code>: base_imageì—ì„œ ì¶”ê°€ì ìœ¼ë¡œ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•  ë•Œ ì‚¬ìš©í•œë‹¤. íŒ¨í‚¤ì§€ ë¦¬ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ë©´ ëœë‹¤. ë‚˜ì˜ ê²½ìš° python:3.7 ì´ë¯¸ì§€ì— tensorflowë¥¼ ì„¤ì¹˜í–ˆë‹¤.</li>\n</ul>\n</li>\n<li>2: Ouputì€ ì»´í¬ë„ŒíŠ¸ì˜ ì¶œë ¥ì„ ì •ì˜í•  ìˆ˜ ìˆë‹¤. í›ˆë ¨í•œ ëª¨ë¸ì„ ì €ì¥í•˜ê¸° ìœ„í•œ ê²½ë¡œë¥¼ Deploy Componentì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì¶œë ¥í–ˆë‹¤.</li>\n<li>3: Metricsì€ ìœ„ì™€ê°™ì´ <code class=\"language-text\">log_metric</code> ìœ¼ë¡œ ê°’ì„ ì£¼ë©´ Vertex AI Pipelineì˜ â€œì‹¤í–‰ ì¸¡ì •í•­ëª©â€ ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆì„ ë¿ë§Œ ì•„ë‹ˆë¼ ì—¬ëŸ¬ê°œì˜ íŒŒì´í”„ë¼ì¸ì„ ì„ íƒí•˜ì—¬ Metricsì— ì…ë ¥í•œ ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ ì„œë¡œ ë¹„êµí•  ìˆ˜ ìˆë‹¤.</li>\n<li>4: MNIST ë°ì´í„°ì…‹ì˜ ë¶ˆëŸ¬ì˜¤ê³  ì „ì²˜ë¦¬ë¥¼ í•˜ëŠ” ê³¼ì •ì´ë‹¤.</li>\n<li>5: Tensorflowë¡œ ê°„ë‹¨í•œ Linear Modelì„ ì •ì˜í•˜ëŠ” ë¶€ë¶„ì´ë‹¤.</li>\n<li>6: ëª¨ë¸ í•™ìŠµê³¼ì •ì„ ì •ì˜í•˜ëŠ” compile ë¶€ë¶„ì´ë‹¤.</li>\n<li>7: ëª¨ë¸ í•™ìŠµ</li>\n<li>8: ëª¨ë¸ í‰ê°€, ê¸°ë³¸ì ìœ¼ë¡œ lossë¥¼ ë°˜í™˜í•˜ê³  <code class=\"language-text\">compile</code> ì‹œ <code class=\"language-text\">metrics</code> ë¡œ ì§€ì •í–ˆë˜ ì¸¡ì •í•­ëª©ë“¤ì´ ìˆœì„œëŒ€ë¡œ ì¶œë ¥ëœë‹¤.</li>\n<li>9: 3ë²ˆì—ì„œ ì´ì•¼ê¸°í–ˆë˜ Component mertricì„ ì§€ì •í•˜ëŠ” ë¶€ë¶„ì´ë‹¤. key valueì˜ ìŒìœ¼ë¡œ ê°’ì„ ì¤€ë‹¤.</li>\n<li>10: ëª¨ë¸ì„ ì €ì¥í•˜ëŠ” ë¶€ë¶„ì´ë‹¤. Outputìœ¼ë¡œ ì§€ì •í–ˆë˜ output_modelì˜ pathì— ëª¨ë¸ì„ ì €ì¥í•œë‹¤</li>\n</ul>\n<p>Metricsì˜ <code class=\"language-text\">log_metric</code> ìœ¼ë¡œ ì§€ì •í•œ ë’¤ í•™ìŠµì˜ ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ì´ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/66509c4bbe52396f3622a91b3810bf09/f79fa/metrics.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 36.17021276595745%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAvElEQVQoz42R2wqEMBBD/f/fkyo+9aVoFS+oaL1nyUDFBVe3EDo+THIagyzLEMcxlFIIwxB35ziOvxUMw4CqqlCWJay1MjdNI6rrWr6vxm8nGMdRlqZpwrqumOdZtCwLnHPo+17ubdtO033fbyWEaZoiSZKvBU/CMFZijEHXdWLM0EdD/1wuc8ET8GYdRVEIJWfWQMNflGKY5zmiKILW+uzL07ZtK4QMolgFq3kl9EbXZM404Y/xIiFDngg/es0hdD4v0M4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"metrics\" title=\"metrics\" src=\"/static/66509c4bbe52396f3622a91b3810bf09/1d69c/metrics.png\" srcset=\"/static/66509c4bbe52396f3622a91b3810bf09/4dcb9/metrics.png 188w,\n/static/66509c4bbe52396f3622a91b3810bf09/5ff7e/metrics.png 375w,\n/static/66509c4bbe52396f3622a91b3810bf09/1d69c/metrics.png 750w,\n/static/66509c4bbe52396f3622a91b3810bf09/f79fa/metrics.png 940w\" sizes=\"(max-width: 750px) 100vw, 750px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span>\n<p>CNN ëª¨ë¸ì„ í•˜ë‚˜ ë” ë§Œë“¤ì–´ì„œ ê°„ë‹¨í•˜ê²Œ ë¹„êµí•´ë³´ì•˜ë‹¤. ì°¸ê³ ë¡œë§Œ ë³´ì.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4de6fc824e7842db7b8dc9c69e705dd1/b8bf8/compare.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 14.361702127659576%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAcElEQVQI102NWQpEIQwE3/0vqh/ivm8ZukEYoUhMZfmcc4K395ZzDuNai7wc9efmnOT5/xnEz3svIIQgWJ5zllqrKKUY4YwxjHBaa0kpsddaSzA7xiAfxAONAAL/Uoq01pjHGKX3Tn/v5TEse4dQAz+29ehXBcTD+gAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"compare\" title=\"compare\" src=\"/static/4de6fc824e7842db7b8dc9c69e705dd1/1d69c/compare.png\" srcset=\"/static/4de6fc824e7842db7b8dc9c69e705dd1/4dcb9/compare.png 188w,\n/static/4de6fc824e7842db7b8dc9c69e705dd1/5ff7e/compare.png 375w,\n/static/4de6fc824e7842db7b8dc9c69e705dd1/1d69c/compare.png 750w,\n/static/4de6fc824e7842db7b8dc9c69e705dd1/78797/compare.png 1125w,\n/static/4de6fc824e7842db7b8dc9c69e705dd1/aa440/compare.png 1500w,\n/static/4de6fc824e7842db7b8dc9c69e705dd1/b8bf8/compare.png 1728w\" sizes=\"(max-width: 750px) 100vw, 750px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span>\n<h2 id=\"2-deploy-with-endpoint\" style=\"position:relative;\"><a href=\"#2-deploy-with-endpoint\" aria-label=\"2 deploy with endpoint permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Deploy with endpoint</h2>\n<p>ì•ì„œ ì €ì¥í•œ ëª¨ë¸ì„ ì„œë¹™í•˜ëŠ” ë¶€ë¶„ì´ë‹¤. ëª¨ë¸ì„ ë°°í¬í•˜ê³  endpointë¥¼ ìƒì„±í•˜ì—¬ ì—°ê²°í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@component</span><span class=\"token punctuation\">(</span>\n    packages_to_install<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"google-cloud-aiplatform\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">deploy_model</span><span class=\"token punctuation\">(</span>\n    model<span class=\"token punctuation\">:</span> Input<span class=\"token punctuation\">[</span>Model<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    project<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span>\n    region<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span>\n    vertex_endpoint<span class=\"token punctuation\">:</span> Output<span class=\"token punctuation\">[</span>Artifact<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    vertex_model<span class=\"token punctuation\">:</span> Output<span class=\"token punctuation\">[</span>Model<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">from</span> google<span class=\"token punctuation\">.</span>cloud <span class=\"token keyword\">import</span> aiplatform\n\n    aiplatform<span class=\"token punctuation\">.</span>init<span class=\"token punctuation\">(</span>project<span class=\"token operator\">=</span>project<span class=\"token punctuation\">,</span> location<span class=\"token operator\">=</span>region<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 1</span>\n\n    deployed_model <span class=\"token operator\">=</span> aiplatform<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">.</span>upload<span class=\"token punctuation\">(</span> <span class=\"token comment\"># 2</span>\n        display_name<span class=\"token operator\">=</span><span class=\"token string\">\"simple-mnist-pipeline\"</span><span class=\"token punctuation\">,</span>\n        artifact_uri <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span>uri<span class=\"token punctuation\">,</span>\n        serving_container_image_uri<span class=\"token operator\">=</span><span class=\"token string\">\"us-docker.pkg.dev/vertex-ai/prediction/tf2-cpu.2-6:latest\"</span>\n    <span class=\"token punctuation\">)</span>\n    endpoint <span class=\"token operator\">=</span> deployed_model<span class=\"token punctuation\">.</span>deploy<span class=\"token punctuation\">(</span>machine_type<span class=\"token operator\">=</span><span class=\"token string\">\"n1-standard-4\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 3</span>\n\n    <span class=\"token comment\"># Save data to the output params</span>\n    vertex_endpoint<span class=\"token punctuation\">.</span>uri <span class=\"token operator\">=</span> endpoint<span class=\"token punctuation\">.</span>resource_name <span class=\"token comment\"># 4</span>\n    vertex_model<span class=\"token punctuation\">.</span>uri <span class=\"token operator\">=</span> deployed_model<span class=\"token punctuation\">.</span>resource_name </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>1: ëª¨ë¸ì„ ì—…ë¡œë“œí•˜ëŠ” ê³¼ì •ì€ google cloudì˜ ì„œë¹„ìŠ¤ì— ì¢…ì†ì ì´ë‹¤.</li>\n<li>2: ëª¨ë¸ ì„œë¹™ì„ ìœ„í•´ì„œ ì €ì¥í•œ ëª¨ë¸ì„ ë¶ˆëŸ¬ì™€ì„œ Vertex aiì—ì„œ ê´€ë¦¬í•˜ëŠ” ëª¨ë¸ë¡œ ë“±ë¡í•œë‹¤. ì´ë•Œ ì–´ë– í•œ ì´ë¯¸ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ serving ëª¨ë¸ì„ ë§Œë“¤ì§€ <code class=\"language-text\">serving_container_image_uri</code> ë¡œ ì§€ì •í•´ì¤˜ì•¼ í•œë‹¤.  <a href=\"https://console.cloud.google.com/artifacts/docker/vertex-ai/us/prediction\">ì—¬ê¸°</a>ì— ë“¤ì–´ê°€ë©´ Predictionì„ ìœ„í•œ ë‹¤ì–‘í•œ ë² ì´ìŠ¤ ì´ë¯¸ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</li>\n<li>3: 2ì—ì„œ ì—…ë¡œë“œí•œ ëª¨ë¸ì„ endpointì™€ ì—°ê²°ì§“ëŠ” ë¶€ë¶„ì´ë‹¤. endpointë¥¼ ì¸ìë¡œ ì£¼ì§€ ì•Šìœ¼ë©´ disploy<em>nameì˜ ì´ë¦„ìœ¼ë¡œ ìë™ìœ¼ë¡œ ìƒì„±ëœë‹¤. ì—¬ê¸°ì„œ ë°°í¬ë¥¼ ìœ„í•œ replicas, accelartor ê·¸ë¦¬ê³  í•˜ë‚˜ì˜ ì—”ë“œí¬ì¸íŠ¸ì— ì—¬ëŸ¬ê°œì˜ ëª¨ë¸ì´ ì—°ê²°ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ traffic</em>percentage ë“±ë„ ì„¤ì •ì´ ê°€ëŠ¥í•˜ë‹¤. <a href=\"https://googleapis.dev/python/aiplatform/latest/aiplatform.html#google.cloud.aiplatform.Model.deploy\">ì—¬ê¸°</a>ë¥¼ ì°¸ê³ í•˜ì.</li>\n<li>4: componentì˜ Outputìœ¼ë¡œ ì§€ì •í•œ <code class=\"language-text\">vertex_endpoint</code> , <code class=\"language-text\">vertex_model</code> ì´ ì²˜ìŒìœ¼ë¡œ ë“±ì¥í–ˆëŠ”ë°, ë‹¨ìˆœíˆ ì»´í¬ë„ŒíŠ¸ì˜ ê²°ê³¼ë¡œì„œ ë°°í¬ëœ ëª¨ë¸ì˜ ì •ë³´ì™€ Endpointì˜ ì •ë³´ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•¨ì´ë‹¤. ì‚¬ì‹¤ ê¼­ í•„ìš”í•œ ë¶€ë¶„ì€ ì•„ë‹ˆë‹¤. </li>\n</ul>\n<p>4ë²ˆê³¼ ê°™ì´ Ouputì„ ì§€ì •í•´ì£¼ë©´ ì•„ë˜ì˜ ì‚¬ì§„ê³¼ ê°™ì´ Pipelineì—ì„œ ì •ë³´ë“¤ì„ ì¶œë ¥í•´ì¤€ë‹¤.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/a2b0df0382defecad4b0c7697ebf3477/ea64c/outputs.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 36.17021276595745%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABO0lEQVQoz42QyXLCMBBE+f8/yDXfkVMO5ALZWArMGhsIWfCKbMmS9SKZCiSHVOXQ1apRT0/PdJqmwcM4YBuOpeZpWTGJJMNVwXh9pDfNGKwrZltFsFEMw4K72Qf7ROGaMObk4dH5ZUhDIWqubwWPK8VgHPIw2jAM9uw+Fe9pQ5zBcLfnqnvD4rX6n2E/OPK8dMmCgtFauFSSSSjatPdzQX+e0J2+sTv8aWjPBetQSk0uNFJpVH3h73dRGncag7UXo7OhMQZdK7TWrmAQ0nAodJvW/xnj6o5PW9Ay1pC5W2duqHU9vtfD6ztKW2y5xMgD0eaVMNqwfgkRZQntQlDXtYMzznrUVUK03ROGEcF8wSGOW50f5HUdL5RlgqwESZo5pMRJSureSimklC17cZWHVGVOmuWtxms9fuq+AMNCGfWgKfgfAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"outputs\" title=\"outputs\" src=\"/static/a2b0df0382defecad4b0c7697ebf3477/1d69c/outputs.png\" srcset=\"/static/a2b0df0382defecad4b0c7697ebf3477/4dcb9/outputs.png 188w,\n/static/a2b0df0382defecad4b0c7697ebf3477/5ff7e/outputs.png 375w,\n/static/a2b0df0382defecad4b0c7697ebf3477/1d69c/outputs.png 750w,\n/static/a2b0df0382defecad4b0c7697ebf3477/ea64c/outputs.png 1116w\" sizes=\"(max-width: 750px) 100vw, 750px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span>\n<p>ê·¸ë¦¬ê³  ê° ì•„í‹°íŒ©íŠ¸ì˜ ì„¸ë¶€ì •ë³´ë¥¼ í™•ì¸í•´ë³´ë©´ urië¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/a3a76542555b67e7da698e910876ee32/5f652/artifacts.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 28.191489361702125%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAp0lEQVQY06WQ2Q7CIBBF+f9vtLXSF7GlC1ipZeAWptUXjUkjycllmTmZIM5lgVpKPJxDXjHGvxDzEuEpbjLgQ3p0CdU53KeZdd8khyecJsuyEAJfEBGstYzbvyHE/Bbe+VOotd6adqH3Hm3TQl0Vhn5ESN9BnlIGruHcoYx/QYwwxrAwT5YblqeHOnVoqh7tZUBTDilHpqsNtDSc+awzctvfilRXjVgBhZPWiFI2OEIAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"artifacts\" title=\"artifacts\" src=\"/static/a3a76542555b67e7da698e910876ee32/1d69c/artifacts.png\" srcset=\"/static/a3a76542555b67e7da698e910876ee32/4dcb9/artifacts.png 188w,\n/static/a3a76542555b67e7da698e910876ee32/5ff7e/artifacts.png 375w,\n/static/a3a76542555b67e7da698e910876ee32/1d69c/artifacts.png 750w,\n/static/a3a76542555b67e7da698e910876ee32/78797/artifacts.png 1125w,\n/static/a3a76542555b67e7da698e910876ee32/5f652/artifacts.png 1302w\" sizes=\"(max-width: 750px) 100vw, 750px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span>\n<h2 id=\"3-define-pipeline\" style=\"position:relative;\"><a href=\"#3-define-pipeline\" aria-label=\"3 define pipeline permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Define Pipeline</h2>\n<p>ìœ„ì—ì„œ ì •ì˜í•œ ë‘ê°œì˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” Pipelineì„ ì‘ì„±í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@dsl<span class=\"token punctuation\">.</span>pipeline</span><span class=\"token punctuation\">(</span>\n    pipeline_root<span class=\"token operator\">=</span>PIPELINE_ROOT<span class=\"token punctuation\">,</span> <span class=\"token comment\"># 1</span>\n    name<span class=\"token operator\">=</span><span class=\"token string\">\"simple-mnist-pipeline\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">pipeline</span><span class=\"token punctuation\">(</span>\n    project<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> PROJECT_ID<span class=\"token punctuation\">,</span> <span class=\"token comment\"># 2</span>\n    region<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> REGION\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    load_data_and_training_task <span class=\"token operator\">=</span> load_data_and_training<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 3</span>\n\n    deploy_task <span class=\"token operator\">=</span> deploy_model<span class=\"token punctuation\">(</span> <span class=\"token comment\"># 4</span>\n        model<span class=\"token operator\">=</span>load_data_and_training_task<span class=\"token punctuation\">.</span>outputs<span class=\"token punctuation\">[</span><span class=\"token string\">\"output_model\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        project<span class=\"token operator\">=</span>project<span class=\"token punctuation\">,</span>\n        region<span class=\"token operator\">=</span>region\n    <span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>1: íŒŒì´í”„ë¼ì¸ì„ ì‹¤í–‰í•˜ë©´ì„œ ìƒì„±ë  Artifactsë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ì¤‘ê°„ ì €ì¥ì†Œì´ë‹¤. MinIO, S3, GCS ë“±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</li>\n<li>2: ì•ì„œ ì„¤ëª…í–ˆë‹¤ì‹œí”¼ <code class=\"language-text\">deploy_model</code> ì˜ ê²½ìš° google cloudì— ì¢…ì†ì ì´ë‹¤. íŒŒë¼ë¯¸í„°ë¡œ ê°’ì„ ë°›ì•„ deployë¥¼ ìœ„í•´ ì‚¬ìš©í•œë‹¤.</li>\n<li>3: ì²˜ìŒìœ¼ë¡œ ì •ì˜í•œ Load data &#x26; Training Component ë¥¼ ì‹¤í–‰í•˜ëŠ” ë¶€ë¶„ì´ë‹¤.</li>\n<li>4: ë‘ë²ˆì§¸ë¡œ ì •ì˜í•œ Deploy with endpoint ë¥¼ ì‹¤í–‰í•˜ëŠ” ë¶€ë¶„ì´ë‹¤. load<em>data</em>and<em>training</em>taskì˜ ouput ì¤‘ output_modelë¥¼ ë¶ˆëŸ¬ì™€ ì…ë ¥ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.</li>\n</ul>\n<h2 id=\"4-run-pipeline\" style=\"position:relative;\"><a href=\"#4-run-pipeline\" aria-label=\"4 run pipeline permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Run Pipeline</h2>\n<p>ì •ì˜í•œ íŒŒì´í”„ë¼ì¸ì„ Vertex AIì—ì„œ ì‹¤í–‰í•˜ëŠ” ë¶€ë¶„ì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\">TIMESTAMP <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">\"%Y%m%d%H%M%S\"</span><span class=\"token punctuation\">)</span>\n\ncompiler<span class=\"token punctuation\">.</span>Compiler<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">compile</span><span class=\"token punctuation\">(</span>\n    pipeline_func<span class=\"token operator\">=</span>pipeline<span class=\"token punctuation\">,</span> package_path<span class=\"token operator\">=</span><span class=\"token string\">\"simple_mnist_pipeline.json\"</span>\n<span class=\"token punctuation\">)</span>\n\nrun <span class=\"token operator\">=</span> pipeline_jobs<span class=\"token punctuation\">.</span>PipelineJob<span class=\"token punctuation\">(</span>\n    display_name<span class=\"token operator\">=</span><span class=\"token string\">\"simple-mnist-pipeline\"</span><span class=\"token punctuation\">,</span>\n    template_path<span class=\"token operator\">=</span><span class=\"token string\">\"simple_mnist_pipeline.json\"</span><span class=\"token punctuation\">,</span>\n    job_id<span class=\"token operator\">=</span><span class=\"token string\">\"simple-mnist-pipeline-{0}\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>TIMESTAMP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    parameter_values<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    enable_caching<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\n\nrun<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span>sync<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","tableOfContents":"<ul>\n<li><a href=\"/category/blog/mlops/simple_model_deploy_mnist/#0-import-library\">0. Import Library</a></li>\n<li><a href=\"/category/blog/mlops/simple_model_deploy_mnist/#1-load-data--training-component\">1. Load data &#x26; Training Component</a></li>\n<li><a href=\"/category/blog/mlops/simple_model_deploy_mnist/#2-deploy-with-endpoint\">2. Deploy with endpoint</a></li>\n<li><a href=\"/category/blog/mlops/simple_model_deploy_mnist/#3-define-pipeline\">3. Define Pipeline</a></li>\n<li><a href=\"/category/blog/mlops/simple_model_deploy_mnist/#4-run-pipeline\">4. Run Pipeline</a></li>\n</ul>","frontmatter":{"title":"[MLOps] Vertex AIì—ì„œ ëª¨ë¸ ë°°í¬í•˜ê¸° (MNIST)","description":"","date":"2021.11.01","emoji":"ğŸƒ","category":"blog"}}},"pageContext":{"slug":"/category/blog/mlops/simple_model_deploy_mnist/","relatedPosts":[{"node":{"fields":{"slug":"/category/blog/interview/"},"frontmatter":{"title":"[ë©´ì ‘ì¤€ë¹„] minimum ì§ˆë¬¸&ë‹µë³€","date":"2021.11.22","emoji":"â“","category":"blog"}}},{"node":{"fields":{"slug":"/category/blog/hackerrank_certification/"},"frontmatter":{"title":"í•´ì»¤ë­í¬ ì¸ì¦ì„œ ë°œê¸‰ í›„ê¸°","date":"2021.11.19","emoji":"ğŸ“š","category":"blog"}}},{"node":{"fields":{"slug":"/category/blog/m1-tensorflow/"},"frontmatter":{"title":"[Tensorflow] M1ì—ì„œ Tensorflow GPU ì‚¬ìš©í•˜ê¸° (Monterey)","date":"2021.11.13","emoji":"ğŸ’ª","category":"blog"}}},{"node":{"fields":{"slug":"/category/blog/effective-python/"},"frontmatter":{"title":"[ì±…] íŒŒì´ì¬ ì½”ë”©ì˜ ê¸°ìˆ ","date":"2021.11.02","emoji":"ğŸ“š","category":"blog"}}}]}}}